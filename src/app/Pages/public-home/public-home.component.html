<div class="container vacante-list my-5">

    <!-- Botón para mostrar filtros en móvil -->
    <div class="mobile-filter-toggle d-md-none mb-3">
        <button class="btn btn-outline-primary w-100" (click)="toggleFiltros()">
            <i class="bi" [class]="mostrarFiltros ? 'bi-funnel-fill' : 'bi-funnel'"></i>
            {{ mostrarFiltros ? 'Ocultar Filtros' : 'Mostrar Filtros' }}
        </button>
    </div>

    <!-- === HEADER: Filtros === -->
    <div class="row align-items-center mb-4 header-row" [class.show-mobile]="mostrarFiltros">

        <div class="col-6 col-md-3 col-search">
            <div class="search-group">
                <input type="text" class="form-control" placeholder="Nombre" [(ngModel)]="filtroNombre"
                    name="nombre" />
                <button class="btn btn-info ms-2" (click)="buscarPorNombre()">
                    Enviar
                </button>
            </div>
        </div>

        <div class="col-6 col-md-3 col-search">
            <div class="search-group">
                <input type="text" class="form-control" placeholder="Empresa" [(ngModel)]="filtroEmpresa"
                    name="nombreEmpresa" />
                <button class="btn btn-info ms-2" (click)="buscarPorNombreEmpresa()">
                    Enviar
                </button>
            </div>
        </div>
        
        <div class="col-6 col-md-3 col-search">
            <div class="search-group">
                <input type="text" class="form-control" placeholder="Categoría" [(ngModel)]="filtroCategoria"
                    name="nombreCategoria" />
                <button class="btn btn-info ms-2" (click)="buscarPorNombreCategoria()">
                    Enviar
                </button>
            </div>
        </div>

        <div class="col-6 col-md-3 col-search">
            <div class="search-group">
                <input type="number" class="form-control" placeholder="Salario mín." [(ngModel)]="filtroSalario"
                    name="salario" />
                <button class="btn btn-info ms-2" (click)="buscarPorSalario()">
                    Enviar
                </button>
            </div>
        </div>
    </div>

    <!-- === TITULO debajo, centrado === -->
    <div class="title-row mb-5 text-center mt-5">
        <h2 class="mb-0">Vacantes</h2>
    </div>

    <!-- Lista de cards -->

    @if (isLoading) {
    <div class="text-center py-5">
        Cargando vacantes…
    </div>
    }
    @else if (errorMensaje) {
    <div class="alert alert-danger">
        {{errorMensaje}}
    </div>
    }

    @else if (vacantes.length) {
    <div id="vacante" class="row justify-content-center row-cols-sm-2 g-4">
        @for (vac of vacantes; track vac.idVacante) {
        <div class="col-auto" id="vacantecard">
            <app-vacante-card [miVacante]="vac"></app-vacante-card>
        </div>
        }
    </div>
    }
    @else {
    <p class="text-center py-5">
        No hay vacantes publicadas.
    </p>
    }

</div>






